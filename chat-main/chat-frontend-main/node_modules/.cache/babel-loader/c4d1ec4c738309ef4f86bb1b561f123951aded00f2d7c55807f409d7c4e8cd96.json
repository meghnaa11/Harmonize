{"ast":null,"code":"import { ChatEvent } from '../constants';\nimport io from 'socket.io-client';\nimport { fromEvent } from 'rxjs';\nexport class SocketService {\n  constructor() {\n    this.socket = {};\n  }\n  init() {\n    console.log('Initializing Socket Service');\n    this.socket = io(process.env.REACT_APP_SERVER_URL);\n    return this;\n  }\n  join(userRoom, isFirst = false) {\n    console.log(`${userRoom.name} joined ${userRoom.room}`);\n    this.socket.emit(ChatEvent.JOIN, {\n      userRoom,\n      isFirst\n    });\n  }\n  send(message) {\n    console.log('Sending Message: ' + message);\n    this.socket.emit(ChatEvent.MESSAGE, message);\n  }\n  updateUnread(unread, roomCode, username) {\n    this.socket.emit(ChatEvent.UNREAD, {\n      unread,\n      roomCode,\n      username\n    });\n  }\n  onJoin() {\n    return fromEvent(this.socket, ChatEvent.JOIN);\n  }\n  onLeave() {\n    return fromEvent(this.socket, ChatEvent.LEAVE);\n  }\n  onRoomDelete() {\n    return fromEvent(this.socket, ChatEvent.ROOM_DELETE);\n  }\n  onMessage() {\n    return fromEvent(this.socket, ChatEvent.MESSAGE);\n  }\n  disconnect() {\n    console.log('Disconnecting...');\n    this.socket.disconnect();\n  }\n}","map":{"version":3,"names":["ChatEvent","io","fromEvent","SocketService","constructor","socket","init","console","log","process","env","REACT_APP_SERVER_URL","join","userRoom","isFirst","name","room","emit","JOIN","send","message","MESSAGE","updateUnread","unread","roomCode","username","UNREAD","onJoin","onLeave","LEAVE","onRoomDelete","ROOM_DELETE","onMessage","disconnect"],"sources":["/media/tina/0ED49F87D49F7027/1_SIT_2024Fall/CS554/project/chat-main/chat-frontend-main/src/services/SocketService.ts"],"sourcesContent":["import { UserRoom, LeaveEventResp, JoinEventResp, ChatMessage, MessageEventResp } from './../types';\nimport { ChatEvent } from '../constants';\nimport io from 'socket.io-client';\nimport { fromEvent, Observable } from 'rxjs';\n\nexport class SocketService {\n\tprivate socket: SocketIOClient.Socket = {} as SocketIOClient.Socket;\n\n\tpublic init(): SocketService {\n\t\tconsole.log('Initializing Socket Service');\n\t\tthis.socket = io(process.env.REACT_APP_SERVER_URL!);\n\t\treturn this;\n\t}\n\n\tpublic join(userRoom: UserRoom, isFirst: boolean = false): void {\n\t\tconsole.log(`${userRoom.name} joined ${userRoom.room}`);\n\t\tthis.socket.emit(ChatEvent.JOIN, { userRoom, isFirst });\n\t}\n\n\tpublic send(message: ChatMessage): void {\n\t\tconsole.log('Sending Message: ' + message);\n\t\tthis.socket.emit(ChatEvent.MESSAGE, message);\n\t}\n\n\tpublic updateUnread(unread: number, roomCode: string, username: string): void {\n\t\tthis.socket.emit(ChatEvent.UNREAD, { unread, roomCode, username });\n\t}\n\n\tpublic onJoin(): Observable<JoinEventResp> {\n\t\treturn fromEvent(this.socket, ChatEvent.JOIN);\n\t}\n\n\tpublic onLeave(): Observable<LeaveEventResp> {\n\t\treturn fromEvent(this.socket, ChatEvent.LEAVE);\n\t}\n\n\tpublic onRoomDelete(): Observable<string> {\n\t\treturn fromEvent(this.socket, ChatEvent.ROOM_DELETE);\n\t}\n\n\tpublic onMessage(): Observable<MessageEventResp> {\n\t\treturn fromEvent(this.socket, ChatEvent.MESSAGE);\n\t}\n\n\tpublic disconnect(): void {\n\t\tconsole.log('Disconnecting...');\n\t\tthis.socket.disconnect();\n\t}\n}\n"],"mappings":"AACA,SAASA,SAAS,QAAQ,cAAc;AACxC,OAAOC,EAAE,MAAM,kBAAkB;AACjC,SAASC,SAAS,QAAoB,MAAM;AAE5C,OAAO,MAAMC,aAAa,CAAC;EAAAC,YAAA;IAAA,KAClBC,MAAM,GAA0B,CAAC,CAAC;EAAA;EAEnCC,IAAIA,CAAA,EAAkB;IAC5BC,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC;IAC1C,IAAI,CAACH,MAAM,GAAGJ,EAAE,CAACQ,OAAO,CAACC,GAAG,CAACC,oBAAqB,CAAC;IACnD,OAAO,IAAI;EACZ;EAEOC,IAAIA,CAACC,QAAkB,EAAEC,OAAgB,GAAG,KAAK,EAAQ;IAC/DP,OAAO,CAACC,GAAG,CAAC,GAAGK,QAAQ,CAACE,IAAI,WAAWF,QAAQ,CAACG,IAAI,EAAE,CAAC;IACvD,IAAI,CAACX,MAAM,CAACY,IAAI,CAACjB,SAAS,CAACkB,IAAI,EAAE;MAAEL,QAAQ;MAAEC;IAAQ,CAAC,CAAC;EACxD;EAEOK,IAAIA,CAACC,OAAoB,EAAQ;IACvCb,OAAO,CAACC,GAAG,CAAC,mBAAmB,GAAGY,OAAO,CAAC;IAC1C,IAAI,CAACf,MAAM,CAACY,IAAI,CAACjB,SAAS,CAACqB,OAAO,EAAED,OAAO,CAAC;EAC7C;EAEOE,YAAYA,CAACC,MAAc,EAAEC,QAAgB,EAAEC,QAAgB,EAAQ;IAC7E,IAAI,CAACpB,MAAM,CAACY,IAAI,CAACjB,SAAS,CAAC0B,MAAM,EAAE;MAAEH,MAAM;MAAEC,QAAQ;MAAEC;IAAS,CAAC,CAAC;EACnE;EAEOE,MAAMA,CAAA,EAA8B;IAC1C,OAAOzB,SAAS,CAAC,IAAI,CAACG,MAAM,EAAEL,SAAS,CAACkB,IAAI,CAAC;EAC9C;EAEOU,OAAOA,CAAA,EAA+B;IAC5C,OAAO1B,SAAS,CAAC,IAAI,CAACG,MAAM,EAAEL,SAAS,CAAC6B,KAAK,CAAC;EAC/C;EAEOC,YAAYA,CAAA,EAAuB;IACzC,OAAO5B,SAAS,CAAC,IAAI,CAACG,MAAM,EAAEL,SAAS,CAAC+B,WAAW,CAAC;EACrD;EAEOC,SAASA,CAAA,EAAiC;IAChD,OAAO9B,SAAS,CAAC,IAAI,CAACG,MAAM,EAAEL,SAAS,CAACqB,OAAO,CAAC;EACjD;EAEOY,UAAUA,CAAA,EAAS;IACzB1B,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC;IAC/B,IAAI,CAACH,MAAM,CAAC4B,UAAU,CAAC,CAAC;EACzB;AACD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}