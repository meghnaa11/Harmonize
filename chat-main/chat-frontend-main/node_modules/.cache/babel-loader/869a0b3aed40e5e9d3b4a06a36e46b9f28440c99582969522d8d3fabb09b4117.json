{"ast":null,"code":"var _jsxFileName = \"/media/tina/0ED49F87D49F7027/1_SIT_2024Fall/CS554/project/chat-frontend-main/src/components/NewRoom/index.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Button, ButtonGroup, Dialog, DialogTitle, DialogContent } from '@material-ui/core';\nimport chatHttp from '../../services/Http';\nimport './style.css';\nimport { useChat } from '../../context/ChatContext';\nimport { useUser } from '../../context/UserContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction NewRoom({\n  open,\n  onClose\n}) {\n  _s();\n  const [isNew, setisNew] = useState(true);\n  const [description, setDescription] = useState('');\n  const [roomCode, setRoomCode] = useState('');\n  const chatSocket = useChat();\n  const {\n    userDetails\n  } = useUser();\n  const handleClose = val => {\n    onClose(val);\n  };\n  const proceed = async e => {\n    e.preventDefault();\n    if (isNew || !isNew && roomCode) {\n      try {\n        let {\n          data\n        } = isNew ? await chatHttp.createRoom({\n          description\n        }) : await chatHttp.joinRoom({\n          roomCode\n        });\n        if (data) {\n          chatSocket.join({\n            name: userDetails.username,\n            room: data.room.code\n          }, true);\n          setisNew(true);\n          setDescription('');\n          setRoomCode('');\n          handleClose(data.room);\n          window.location.reload();\n        }\n      } catch (e) {\n        var _e$response, _e$response2, _e$response2$data;\n        console.log('Error:', (_e$response = e.response) === null || _e$response === void 0 ? void 0 : _e$response.data);\n        if (((_e$response2 = e.response) === null || _e$response2 === void 0 ? void 0 : (_e$response2$data = _e$response2.data) === null || _e$response2$data === void 0 ? void 0 : _e$response2$data.error) === 'User already in room') {\n          window.location.reload();\n          return;\n        }\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Dialog, {\n    onClose: () => handleClose(null),\n    \"aria-labelledby\": \"new-room-dialog\",\n    open: open,\n    className: \"newRoom\",\n    children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n      id: \"new-room-dialog\",\n      children: \"New Room\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n      className: \"newRoom__content\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        children: [/*#__PURE__*/_jsxDEV(ButtonGroup, {\n          className: \"newRoom__type\",\n          color: \"primary\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => setisNew(true),\n            className: `newRoom__button ${isNew && 'newRoom__button--selected'}`,\n            children: \"Create Room\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => setisNew(false),\n            className: `newRoom__button ${!isNew && 'newRoom__button--selected'}`,\n            children: \"Join Room\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 6\n        }, this), isNew ? /*#__PURE__*/_jsxDEV(\"textarea\", {\n          rows: 3,\n          value: description,\n          onChange: e => setDescription(e.target.value),\n          placeholder: \"Room Description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 7\n        }, this) : /*#__PURE__*/_jsxDEV(\"input\", {\n          value: roomCode,\n          onChange: e => setRoomCode(e.target.value),\n          type: \"text\",\n          placeholder: \"Room Code\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: proceed,\n          type: \"submit\",\n          className: \"secondary\",\n          variant: \"contained\",\n          color: \"primary\",\n          size: \"large\",\n          children: \"Proceed\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 3\n  }, this);\n}\n_s(NewRoom, \"qkKUcFDzUkkSuHo1bYavAZ08ww4=\", false, function () {\n  return [useChat, useUser];\n});\n_c = NewRoom;\nexport default NewRoom;\nvar _c;\n$RefreshReg$(_c, \"NewRoom\");","map":{"version":3,"names":["React","useState","Button","ButtonGroup","Dialog","DialogTitle","DialogContent","chatHttp","useChat","useUser","jsxDEV","_jsxDEV","NewRoom","open","onClose","_s","isNew","setisNew","description","setDescription","roomCode","setRoomCode","chatSocket","userDetails","handleClose","val","proceed","e","preventDefault","data","createRoom","joinRoom","join","name","username","room","code","window","location","reload","_e$response","_e$response2","_e$response2$data","console","log","response","error","className","children","id","fileName","_jsxFileName","lineNumber","columnNumber","color","onClick","rows","value","onChange","target","placeholder","type","variant","size","_c","$RefreshReg$"],"sources":["/media/tina/0ED49F87D49F7027/1_SIT_2024Fall/CS554/project/chat-frontend-main/src/components/NewRoom/index.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Button, ButtonGroup, Dialog, DialogTitle, DialogContent } from '@material-ui/core';\nimport chatHttp from '../../services/Http';\nimport './style.css';\nimport { useChat } from '../../context/ChatContext';\nimport { useUser } from '../../context/UserContext';\nimport { RoomPopulated } from '../../types';\n\nexport interface NewRoomProps {\n\topen: boolean;\n\tonClose: (value: null | RoomPopulated) => void;\n}\n\nfunction NewRoom({ open, onClose }: NewRoomProps) {\n\tconst [ isNew, setisNew ] = useState(true);\n\tconst [ description, setDescription ] = useState('');\n\tconst [ roomCode, setRoomCode ] = useState('');\n\tconst chatSocket = useChat();\n\tconst { userDetails } = useUser();\n\n\tconst handleClose = (val: null | RoomPopulated) => {\n\t\tonClose(val);\n\t};\n\n\tconst proceed = async (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n\t\te.preventDefault();\n\t\tif (isNew || (!isNew && roomCode)) {\n\t\t\ttry {\n\t\t\t\tlet { data } = isNew ? await chatHttp.createRoom({ description }) : await chatHttp.joinRoom({ roomCode });\n\t\t\t\tif (data) {\n\t\t\t\t\tchatSocket.join({ name: userDetails.username, room: data.room.code }, true);\n\t\t\t\t\tsetisNew(true);\n\t\t\t\t\tsetDescription('');\n\t\t\t\t\tsetRoomCode('');\n\t\t\t\t\thandleClose(data.room);\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log('Error:', e.response?.data);\n\t\t\t\tif (e.response?.data?.error === 'User already in room') {\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\treturn (\n\t\t<Dialog onClose={() => handleClose(null)} aria-labelledby=\"new-room-dialog\" open={open} className=\"newRoom\">\n\t\t\t<DialogTitle id=\"new-room-dialog\">New Room</DialogTitle>\n\t\t\t<DialogContent className=\"newRoom__content\">\n\t\t\t\t<form>\n\t\t\t\t\t<ButtonGroup className=\"newRoom__type\" color=\"primary\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={() => setisNew(true)}\n\t\t\t\t\t\t\tclassName={`newRoom__button ${isNew && 'newRoom__button--selected'}`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tCreate Room\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={() => setisNew(false)}\n\t\t\t\t\t\t\tclassName={`newRoom__button ${!isNew && 'newRoom__button--selected'}`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tJoin Room\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\n\t\t\t\t\t{isNew ? (\n\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\trows={3}\n\t\t\t\t\t\t\tvalue={description}\n\t\t\t\t\t\t\tonChange={(e) => setDescription(e.target.value)}\n\t\t\t\t\t\t\tplaceholder=\"Room Description\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<input value={roomCode} onChange={(e) => setRoomCode(e.target.value)} type=\"text\" placeholder=\"Room Code\" />\n\t\t\t\t\t)}\n\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={proceed}\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName=\"secondary\"\n\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t>\n\t\t\t\t\t\tProceed\n\t\t\t\t\t</Button>\n\t\t\t\t</form>\n\t\t\t</DialogContent>\n\t\t</Dialog>\n\t);\n}\n\nexport default NewRoom;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}